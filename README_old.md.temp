# ğŸ‡§ğŸ‡¬ Bulgarian Car Marketplace - Firebase Services

Bulgarian Car Marketplace - Integrated Firebase system with full support for Bulgarian and European customizations.

## ğŸ“ Core Files

### ğŸ”§ `firebase-config.ts`
**Firebase Configuration optimized for Bulgaria**
- Firebase setup with Bulgarian customizations
- Support for European currency (EUR) and Bulgarian formatting
- Europe/Sofia timezone settings
- Comprehensive Bulgarian formatting utilities
- Firebase emulators support for local development

### ğŸ” `auth-service.ts`
**Advanced authentication system for Bulgarian users**
- Multi-language login system (BG/EN)
- Google and Facebook login support
- Bulgarian user profile management with BulgarianUser interface
- Bulgarian phone number validation (+359)
- Bulgarian error and success messages
- Role management (buyer, seller, admin, moderator)

### ğŸ’¬ `realtimeMessaging.ts`
**Advanced real-time messaging system**
- Real-time messaging between buyers and sellers
- Real-time typing indicators
- Chat room management
- Attachment and image support
- New message notifications
- Read/unread message tracking
- Support for car-specific conversations

### ğŸ¨ `ChatInterface.tsx`
**Interactive chat interface**
- Modern and responsive interface
- Support for text messages and images
- Typing indicator with animations
- Message status display (sent/read)
- Bulgarian time formatting
- Conversation closure capability

### ğŸ“‹ `ChatList.tsx`
**Active conversations list**
- Display all active conversations
- Number of unread messages
- Preview of last message
- Information about related car
- Smart time ordering
- Conversation search

### ğŸ“„ `MessagesPage.tsx`
**Complete messaging page**
- Responsive layout with conversation list
- Main chat interface
- Management of selected conversation state
- Support for navigation between conversations
- Empty state display when no conversations exist

### ï¿½ `index.ts`
**Main export file for all services**
- Export all services and utilities
- Daily usage helper functions
- Automatic service setup
- Service status checking
- Flexible direct import support

### ğŸ§ª `services-test.ts`
**Ù†Ø¸Ø§Ù… Ø§Ø®ØªØ¨Ø§Ø± Ø´Ø§Ù…Ù„ Ù„Ù„Ø®Ø¯Ù…Ø§Øª**
- Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Firebase initialization
- Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø¯ Ø¨Ù„ØºØ§Ø±ÙŠØ©
- Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª mock Ù„Ù„Ø®Ø¯Ù…Ø§Øª
- ÙØ­Øµ Ø­Ø© Ø®Ø¯Ù…Ø§Øª
- ØªÙ‚Ø§Ø±ÙŠØ± Ù…ÙØµÙ„Ø© Ù„Ù„Ù†ØªØ§Ø¦Ø¬

## âœ¨ Ù…ÙŠØ²Ø§Øª Ø¬Ø¯ÙŠØ¯Ø©

### ï¿½ Ù…Ø±Ø§Ø³Ù„Ø© ÙØ±ÙŠØ© (Real-time Messaging)
- **Ù…Ø±Ø§Ø³Ù„Ø© ÙØ±ÙŠØ©**: Ù†Ø¸Ø§Ù… Ù…Ø­Ø§Ø¯Ø«Ø© ÙØ±ÙŠØ© Ø¨ÙŠÙ† Ù…Ø´ØªØ±ÙŠÙ† Ø¨Ø§Ø¦Ø¹ÙŠÙ†
- **Ù…Ø¤Ø´Ø±Ø§Øª ÙƒØªØ§Ø¨Ø©**: Ø¹Ø±Ø¶ Ø­Ø© "ÙŠÙƒØªØ¨ Ø¢Ù†..."  Ù‚Øª ÙØ¹Ù„ÙŠ
- **Ø¥Ø¯Ø§Ø±Ø© Ù…Ø­Ø§Ø¯Ø«Ø§Øª**: Ø¥Ù†Ø´Ø§Ø¡ Ø¥Ø¯Ø§Ø±Ø© ØºØ±Ù Ù…Ø­Ø§Ø¯Ø«Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
- **Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø°ÙƒÙŠØ©**: ØªØªØ¨Ø¹ Ø±Ø³Ø§Ø¦Ù„ Ø¬Ø¯ÙŠØ¯Ø© Ù…Ù‚Ø±Ø¡Ø©
- **Ø¯Ø¹Ù… Ø³ÙŠØ§Ø±Ø§Øª**: Ø±Ø¨Ø· Ù…Ø­Ø§Ø¯Ø«Ø§Øª Ø¨Ø³ÙŠØ§Ø±Ø§Øª Ù…Ø­Ø¯Ø¯Ø©
- **Ø§Ø¬Ù‡Ø© Ø­Ø¯ÙŠØ«Ø©**: ØªØµÙ…ÙŠÙ… Ù…ØªØ¬Ø§Ø¨  Ø¯Ø¹Ù… ÙƒØ§Ù…Ù„ Ù„Ù„Ø¨Ù„ØºØ§Ø±ÙŠØ©

### ğŸ¨ Ø¨Ø­Ø« Ù…ØªÙ‚Ø¯Ù… (Advanced Search)
- **ÙÙ„ØªØ±Ø© Ø´Ø§Ù…Ù„Ø©**: Ø¨Ø­Ø« Ø­Ø³Ø¨ Ø³Ø¹Ø±ØŒ Ø³Ù†Ø©ØŒ ÙƒÙŠÙ„Ù…ØªØ±Ø§ØªØŒ Ù†Ø¹
- **Ø¨Ø­Ø« Ø°ÙƒÙŠ**: Ø¨Ø­Ø«  Ø¬Ø§Ù†Ø¨ Ø¹Ù…ÙŠÙ„ Ù„ØªØ¬Ø§Ø² Ù‚ÙŠØ¯ Firestore
- **Ø§Ø¬Ù‡Ø© Ø¨Ù„ØºØ§Ø±ÙŠØ©**: Ø¬Ù…ÙŠØ¹ Ù†ØµØµ ØªØ³Ù…ÙŠØ§Øª Ø¨Ù„ØºØ© Ø¨Ù„ØºØ§Ø±ÙŠØ©
- **Ù†ØªØ§Ø¦Ø¬ ÙØ±ÙŠØ©**: ØªØ­Ø¯ÙŠØ« Ù†ØªØ§Ø¦Ø¬ Ø¹Ù†Ø¯ ØªØºÙŠÙŠØ± ÙÙ„Ø§ØªØ±
- **Ø­ÙØ¸ ØªÙØ¶ÙŠÙ„Ø§Øª**: ØªØ°ÙƒØ± Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¨Ø­Ø« Ø£Ø®ÙŠØ±Ø©

### ğŸ“¸ Ø¥Ø¯Ø§Ø±Ø© ØµØ± (Image Management)
- **Ø±ÙØ¹ Ù…ØªØ¹Ø¯Ø¯**: Ø±ÙØ¹ ØµØ± Ù…ØªØ¹Ø¯Ø¯Ø©  Ø³Ø­Ø¨ Ø¥ÙÙ„Ø§Øª
- **Ø±Ø¶ ØªÙØ§Ø¹Ù„ÙŠ**: Ø¹Ø±Ø¶ ØµØ±  Ø±Ø¶  ØªÙ†Ù‚Ù„
- **ØªØ­Ø³ÙŠÙ† Ø£Ø¯Ø§Ø¡**: Ø¶ØºØ· ØµØ± ØªØ­Ø³ÙŠÙ† Ø¬Ø¯Ø©
- **Ø¯Ø¹Ù… ØµÙŠØº**: Ø¯Ø¹Ù… JPGØŒ PNGØŒ GIF  ØªØ­Ù‚Ù‚  ØµØ­Ø©
- **Ø§ÙŠÙ†Ø© ÙØ±ÙŠØ©**: Ø¹Ø±Ø¶ ØµØ± ÙØ± Ø±ÙØ¹Ù‡Ø§

### ğŸŒ ØªØ±Ø¬Ù…Ø© Ø´Ø§Ù…Ù„Ø© (Comprehensive Translation)
- **Ù„ØºØªØ§Ù† Ø±Ø¦ÙŠØ³ÙŠØªØ§Ù†**: Ø¯Ø¹Ù… ÙƒØ§Ù…Ù„ Ù„Ù„Ø¨Ù„ØºØ§Ø±ÙŠØ© Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©
- **Hook Ù…ØªÙ‚Ø¯Ù…**: Ù†Ø¸Ø§Ù… ØªØ±Ø¬Ù…Ø©  Context API
- **ØªØºØ·ÙŠØ© ÙƒØ§Ù…Ù„Ø©**: ØªØ±Ø¬Ù…Ø© Ø¬Ù…ÙŠØ¹ Ù†ØµØµ Ø±Ø³Ø§Ø¦Ù„
- **ØªÙ†Ø³ÙŠÙ‚ Ø¨Ù„ØºØ§Ø±ÙŠ**: ØªØ§Ø±ÙŠØ® Ø£Ø±Ù‚Ø§Ù… Ø¨ØªÙ†Ø³ÙŠÙ‚ Ø¨Ù„ØºØ§Ø±ÙŠ
- **Ø³Ù‡Ù„Ø© ØªØ³Ø¹**: Ø¥Ø¶Ø§ÙØ© Ù„ØºØ§Øª Ø¬Ø¯ÙŠØ¯Ø© Ø¨Ø³Ù‡Ù„Ø©

### ğŸ§ª Ù†Ø¸Ø§Ù… Ø§Ø®ØªØ¨Ø§Ø± Ù…Ø­Ø³Ù† (Enhanced Testing)
- **ØªØºØ·ÙŠØ© Ø´Ø§Ù…Ù„Ø©**: Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ù„Ø¬Ù…ÙŠØ¹ Ø®Ø¯Ù…Ø§Øª Ù…ÙƒÙ†Ø§Øª
- **Mocking Ù…ØªÙ‚Ø¯Ù…**: Ù…Ø­Ø§ÙƒØ§Ø© Firebase  React Router
- **Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª ÙØ±ÙŠØ©**: Jest + React Testing Library
- **ØªÙ‚Ø§Ø±ÙŠØ± Ù…ÙØµÙ„Ø©**: Ù†ØªØ§Ø¦Ø¬ Ø§Ø¶Ø­Ø©  ØªÙØ§ØµÙŠÙ„ Ø£Ø®Ø·Ø§Ø¡
- **CI/CD Ø¬Ø§Ù‡Ø²**: Ø¬Ø§Ù‡Ø² Ù„Ù„ØªÙƒØ§Ù…Ù„  Ø£Ù†Ø¸Ù…Ø© Ø¨Ù†Ø§Ø¡

### 1. Ø¥Ø¹Ø¯Ø§Ø¯ Ø¨ÙŠØ¦Ø©
```bash
# Ù†Ø³Ø® Ù…Ù„Ù Ø¨ÙŠØ¦Ø©
cp .env.example .env

# ØªØ­Ø¯ÙŠØ« Ù…ØªØºÙŠØ±Ø§Øª Firebase  .env
# VITE_FIREBASE_API_KEY=your-api-key-here
# VITE_FIREBASE_PROJECT_ID=globul-cars
# Ø¥Ù„Ø®...
```

### 2. ØªØ´ØºÙŠÙ„ Firebase Emulators
```bash
# ØªØ´ØºÙŠÙ„ Ø¬Ù…ÙŠØ¹ Ù…Ø­Ø§ÙƒÙŠØ§Øª
firebase emulators:start

#  ØªØ´ØºÙŠÙ„ Ù…Ø­Ø§ÙƒÙŠØ§Øª Ù…Ø­Ø¯Ø¯Ø©
firebase emulators:start --only auth,firestore,storage
```

### 3. Ø§Ø®ØªØ¨Ø§Ø± Ø®Ø¯Ù…Ø§Øª
```bash
# ØªØ´ØºÙŠÙ„ Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø®Ø¯Ù…Ø§Øª
npm run test:services

#  ØªØ´ØºÙŠÙ„ Ù…Ø¨Ø§Ø´Ø±Ø©
node services-test.ts
```

### 4. Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø®Ø¯Ù…Ø§Øª
```typescript
import {
  initializeBulgarianFirebase,
  bulgarianAuth,
  bulgarianMessaging,
  bulgarianUtils
} from './index';

// ØªÙ‡ÙŠØ¦Ø© Firebase
await initializeBulgarianFirebase();

// ØªØ³Ø¬ÙŠÙ„ Ù…Ø³ØªØ®Ø¯Ù… Ø¬Ø¯ÙŠØ¯
const user = await bulgarianAuth.signUp(
  'user@globul-cars.bg',
  'password123',
  {
    displayName: 'Ğ˜Ğ²Ğ°Ğ½ Ğ˜Ğ²Ğ°Ğ½Ğ¾Ğ²',
    phoneNumber: '+359888123456',
    preferredLanguage: 'bg',
    location: 'Ğ¡Ğ¾Ñ„Ğ¸Ñ'
  }
);

// Ø¥Ø¶Ø§ÙØ© ØªØ¹Ù„ÙŠÙ‚  Ø³ÙŠØ§Ø±Ø©
const messageId = await bulgarianMessaging.sendCarMessage(
  'CAR-BG-123456-ABCDEF',
  'ĞÑ‚Ğ»Ğ¸Ñ‡Ğ½Ğ° ĞºĞ¾Ğ»Ğ°! ĞœĞ¾Ğ¶Ğµ Ğ»Ğ¸ Ğ´Ğ° ÑĞµ Ğ²Ğ¸Ğ´Ğ¸Ğ¼?',
  'question'
);

// Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø£Ø¯Ø§Øª Ù…Ø³Ø§Ø¹Ø¯Ø©
const formattedPrice = bulgarianUtils.formatPrice(25000); // "25,000.00 â‚¬"
const isValidPhone = bulgarianUtils.validatePhone('+359888123456'); // true
```

## ğŸŒ Ù…ÙŠØ²Ø§Øª Ø¨Ù„ØºØ§Ø±ÙŠØ© Ù…ØªÙ‚Ø¯Ù…Ø©

### ğŸ’° Ù†Ø¸Ø§Ù… Ø¹Ù…Ù„Ø© ØªÙ†Ø³ÙŠÙ‚
```typescript
import { BulgarianFirebaseUtils } from './firebase-config';

// ØªÙ†Ø³ÙŠÙ‚ Ø¹Ù…Ù„Ø© Ø±Ø¨ÙŠØ©
const price = BulgarianFirebaseUtils.formatCurrency(25000); // "25 000,00 â‚¬"

// ØªÙ†Ø³ÙŠÙ‚ ØªØ§Ø±ÙŠØ® Ø¨Ù„ØºØ§Ø±ÙŠ
const date = BulgarianFirebaseUtils.formatTimestamp(firebaseTimestamp);
// "15 Ğ´ĞµĞºĞµĞ¼Ğ²Ñ€Ğ¸ 2024 Ğ³., 14:30"

BulgarianFirebaseUtils.formatBulgarianDate(new Date());
// "15.12.2024"
```

### ğŸ“± ØªØ­Ù‚Ù‚  Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù„ØºØ§Ø±ÙŠØ©
```typescript
// ØªØ­Ù‚Ù‚  Ø±Ù‚Ù… Ù‡Ø§ØªÙ Ø¨Ù„ØºØ§Ø±ÙŠ
const isValid = BulgarianFirebaseUtils.validateBulgarianPhone('+359888123456'); // true

// ØªØ­Ù‚Ù‚  Ø±Ù…Ø² Ø¨Ø±ÙŠØ¯ÙŠ Ø¨Ù„ØºØ§Ø±ÙŠ
const isValidPostal = BulgarianFirebaseUtils.validateBulgarianPostalCode('1000'); // true

// Ø­ØµÙ„  Ù‚Øª Ø¨Ù„ØºØ§Ø±ÙŠ
const bulgarianTime = BulgarianFirebaseUtils.getBulgarianTime();

// ØªÙ†Ø¸ÙŠÙ Ù†Øµ Ø¨Ù„ØºØ§Ø±ÙŠ
const cleanText = BulgarianFirebaseUtils.sanitizeBulgarianText('Hello <script>alert("hack")</script> World!');
```

### ğŸ†” Ø¥Ù†Ø´Ø§Ø¡ Ø±ÙØ§Øª Ø¨Ù„ØºØ§Ø±ÙŠØ©
```typescript
import { bulgarianUtils } from './index';

// Ø¥Ù†Ø´Ø§Ø¡ Ø±ÙØ§Øª ÙØ±ÙŠØ¯Ø©
const carId = bulgarianUtils.generateCarId();     // "BG-CAR-1A2B3C-XYZ789"
const userId = bulgarianUtils.generateUserId();   // "BG-USER-1A2B3C-XYZ789"
const msgId = bulgarianUtils.generateMessageId(); // "BG-MSG-1A2B3C-XYZ789"
```

## ğŸ”§ Ø¥Ø¹Ø¯Ø§Ø¯ Ø¨ÙŠØ¦Ø© ØªÙØµÙŠÙ„ÙŠ

### Ù…ØªØºÙŠØ±Ø§Øª Ø¨ÙŠØ¦Ø© Ù…Ø·Ù„Ø¨Ø© (.env)
```env
# Firebase Configuration
VITE_FIREBASE_API_KEY=your-actual-firebase-api-key
VITE_FIREBASE_AUTH_DOMAIN=globul-cars.firebaseapp.com
VITE_FIREBASE_PROJECT_ID=globul-cars
VITE_FIREBASE_STORAGE_BUCKET=globul-cars.appspot.com
VITE_FIREBASE_MESSAGING_SENDER_ID=123456789
VITE_FIREBASE_APP_ID=1:123456789:web:abcdef123456
VITE_FIREBASE_MEASUREMENT_ID=G-ABCDEFGHIJ

# Bulgarian Configuration
VITE_BULGARIAN_CURRENCY=EUR
VITE_BULGARIAN_REGION=Bulgaria
VITE_BULGARIAN_LOCALE=bg-BG
VITE_BULGARIAN_TIMEZONE=Europe/Sofia
VITE_BULGARIAN_DEFAULT_LANGUAGE=bg

# Development Environment
VITE_USE_EMULATORS=true
VITE_NODE_ENV=development

# Security
VITE_ENCRYPTION_KEY=your-encryption-key-here
VITE_JWT_SECRET=your-jwt-secret-here

# External Services
VITE_GOOGLE_MAPS_API_KEY=your-google-maps-api-key
VITE_RECAPTCHA_SITE_KEY=your-recaptcha-site-key
```

### Firebase Configuration (firebase.json)
```json
{
  "firestore": {
    "rules": "firestore.rules",
    "indexes": "firestore.indexes.json"
  },
  "functions": {
    "predeploy": ["npm --prefix \"$RESOURCE_DIR\" run lint"]
  },
  "hosting": {
    "public": "dist",
    "ignore": ["firebase.json", "**/.*", "**/node_modules/**"],
    "rewrites": [{ "source": "**", "destination": "/index.html" }]
  },
  "storage": {
    "rules": "storage.rules"
  },
  "emulators": {
    "auth": { "port": 9099 },
    "firestore": { "port": 8080 },
    "functions": { "port": 5001 },
    "storage": { "port": 9199 },
    "ui": { "enabled": true, "port": 4000 }
  }
}
```

## ğŸ“Š Ù‡ÙŠÙƒÙ„ Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª

### Ù…Ø¬Ù…Ø¹Ø§Øª Firestore Ø±Ø¦ÙŠØ³ÙŠØ©
```
users/                          # Ù…Ù„ÙØ§Øª Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø¨Ù„ØºØ§Ø±ÙŠØ©
  â”œâ”€â”€ {userId}/
  â”‚   â”œâ”€â”€ displayName: string     # Ø§Ø³Ù… Ø¨Ù„ØºØ© Ø¨Ù„ØºØ§Ø±ÙŠØ©
  â”‚   â”œâ”€â”€ email: string
  â”‚   â”œâ”€â”€ phoneNumber: string     # Ø±Ù‚Ù… Ù‡Ø§ØªÙ Ø¨Ù„ØºØ§Ø±ÙŠ (+359)
  â”‚   â”œâ”€â”€ preferredLanguage: 'bg' | 'en'
  â”‚   â”œâ”€â”€ currency: 'EUR'
  â”‚   â”œâ”€â”€ timezone: 'Europe/Sofia'
  â”‚   â”œâ”€â”€ role: 'buyer' | 'seller' | 'admin' | 'moderator'
  â”‚   â”œâ”€â”€ location: string        # Ù…Ø¯ÙŠÙ†Ø© Ø¨Ù„ØºØ§Ø±ÙŠØ©
  â”‚   â””â”€â”€ statistics: object      # Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ù…Ø³ØªØ®Ø¯Ù…

cars/                           # Ø³ÙŠØ§Ø±Ø§Øª Ø±Ø¶Ø© Ù„Ù„Ø¨ÙŠØ¹
  â”œâ”€â”€ {carId}/
  â”‚   â”œâ”€â”€ title: string          # Ø¹Ù†Ø§Ù† Ø¥Ø¹Ù„Ø§Ù†
  â”‚   â”œâ”€â”€ price: number          # Ø³Ø¹Ø± Ø¨ÙŠØ±
  â”‚   â”œâ”€â”€ currency: 'EUR'
  â”‚   â”œâ”€â”€ location: string       # Ù…Ù‚Ø¹ Ø³ÙŠØ§Ø±Ø©
  â”‚   â”œâ”€â”€ lastActivity: timestamp
  â”‚   â””â”€â”€ messageCount: object   # Ø¹Ø¯Ø¯ Ø±Ø³Ø§Ø¦Ù„ Ø­Ø³Ø¨ Ù†Ø¹

carMessages/                    # ØªØ¹Ù„ÙŠÙ‚Ø§Øª Ø£Ø³Ø¦Ù„Ø© Ø³ÙŠØ§Ø±Ø§Øª
  â”œâ”€â”€ {messageId}/
  â”‚   â”œâ”€â”€ carId: string
  â”‚   â”œâ”€â”€ userId: string
  â”‚   â”œâ”€â”€ text: string           # Ù†Øµ (Ø¯Ø¹Ù… Ø¨Ù„ØºØ§Ø±ÙŠ ÙƒØ§Ù…Ù„)
  â”‚   â”œâ”€â”€ type: 'comment' | 'question' | 'offer' | 'review'
  â”‚   â”œâ”€â”€ rating?: number        # ØªÙ‚ÙŠÙŠÙ… (1-5)
  â”‚   â”œâ”€â”€ price?: number         # Ø³Ø¹Ø± Ø¹Ø±Ø¶
  â”‚   â”œâ”€â”€ language: 'bg' | 'en'
  â”‚   â”œâ”€â”€ likes: number
  â”‚   â””â”€â”€ timestamp: timestamp

chatRooms/                      # ØºØ±Ù Ø¯Ø±Ø¯Ø´Ø©
  â”œâ”€â”€ {chatRoomId}/
  â”‚   â”œâ”€â”€ participants: string[]
  â”‚   â”œâ”€â”€ carId: string
  â”‚   â”œâ”€â”€ carTitle: string       # Ø¹Ù†Ø§Ù† Ø³ÙŠØ§Ø±Ø©
  â”‚   â”œâ”€â”€ lastMessage: object
  â”‚   â”œâ”€â”€ unreadCount: object    # Ø¹Ø¯Ø¯ Ø±Ø³Ø§Ø¦Ù„ ØºÙŠØ± Ù…Ù‚Ø±Ø¡Ø©
  â”‚   â””â”€â”€ messageCount: number

chatMessages/                   # Ø±Ø³Ø§Ø¦Ù„ Ø¯Ø±Ø¯Ø´Ø©
  â”œâ”€â”€ {messageId}/
  â”‚   â”œâ”€â”€ chatRoomId: string
  â”‚   â”œâ”€â”€ userId: string
  â”‚   â”œâ”€â”€ text: string
  â”‚   â””â”€â”€ timestamp: timestamp

notifications/                  # Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
  â”œâ”€â”€ {notificationId}/
  â”‚   â”œâ”€â”€ userId: string
  â”‚   â”œâ”€â”€ type: string
  â”‚   â”œâ”€â”€ title: string          # Ø¹Ù†Ø§Ù† Ø¨Ù„ØºØ© Ø¨Ù„ØºØ§Ø±ÙŠØ©
  â”‚   â”œâ”€â”€ body: string           # Ù…Ø­ØªÙ‰ Ø¥Ø´Ø¹Ø§Ø±
  â”‚   â””â”€â”€ isRead: boolean
```

## ğŸ›¡ï¸ Ø£Ù…Ø§Ù† Ø§Ù…ØªØ«

### ğŸ”’ Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø£Ù…Ø§Ù† Ù…ØªÙ‚Ø¯Ù…Ø©
- ØªØ´Ø± Ø¨ÙŠØ§Ù†Ø§Øª Ø­Ø³Ø§Ø³Ø© Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… AES-256
- ØªØ­Ù‚Ù‚  ØµØ­Ø© Ø¬Ù…ÙŠØ¹ Ù…Ø¯Ø®Ù„Ø§Øª
- Ø­Ù…Ø§ÙŠØ©  XSS  SQL injection
- rate limiting Ù…ØªÙ‚Ø¯Ù… Ù„Ù„Ù€ API calls
- ØªØ´Ø± Ù…Ù„ÙØ§Øª  Firebase Storage

### ğŸ“‹ Ø§Ù…ØªØ« Ø±Ø¨ÙŠ Ø¨Ù„ØºØ§Ø±ÙŠ
- Ø¯Ø¹Ù… ÙƒØ§Ù…Ù„ Ù„Ù€ GDPR Ù„Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø´Ø®ØµÙŠØ©
- ØªÙ†Ø³ÙŠÙ‚ Ø¹Ù…Ù„Ø© Ø±Ø¨ÙŠØ© (EUR)  ÙØ§ØµÙ„ Ø¨Ù„ØºØ§Ø±ÙŠØ©
- Ø±Ø³Ø§Ø¦Ù„ Ø®Ø·Ø£ Ù†Ø¬Ø§Ø­ Ø¨Ù„ØºØ© Ø¨Ù„ØºØ§Ø±ÙŠØ©
- Ø¯Ø¹Ù… Ø·Ù‚Ø© Ø²ÙŠØ© Europe/Sofia
- ØªØ­Ù‚Ù‚  ØµØ­Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù„ØºØ§Ø±ÙŠØ© (Ù‡Ø§ØªÙØŒ Ø¹Ù†Ø§ÙŠÙ†ØŒ Ø£ÙƒØ§Ø¯ Ø¨Ø±ÙŠØ¯ÙŠØ©)

## ğŸ§ª Ù†Ø¸Ø§Ù… Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø´Ø§Ù…Ù„

### ØªØ´ØºÙŠÙ„ Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª
```bash
# Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø®Ø¯Ù…Ø§Øª ÙƒØ§Ù…Ù„Ø©
npm run test:services

# Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø­Ø¯Ø©
npm run test:unit

# Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª ØªÙƒØ§Ù…Ù„
npm run test:integration

# Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Firebase
npm run test:firebase
```

### Ø£Ù†Ø§Ø¹ Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ù…ØªØ§Ø­Ø©
- âœ… **Firebase Initialization Tests** - ÙØ­Øµ ØªÙ‡ÙŠØ¦Ø© Firebase
- âœ… **Bulgarian Utilities Tests** - Ø§Ø®ØªØ¨Ø§Ø± Ø¯ Ø¨Ù„ØºØ§Ø±ÙŠØ©
- âœ… **Authentication Mock Tests** - Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ù…ØµØ§Ø¯Ù‚Ø©
- âœ… **Messaging Mock Tests** - Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ù…Ø±Ø§Ø³Ù„Ø©
- âœ… **Service Status Tests** - ÙØ­Øµ Ø­Ø© Ø®Ø¯Ù…Ø§Øª

## ğŸ“ˆ Ù…Ø±Ø§Ù‚Ø¨Ø© ØªØ­Ù„ÙŠÙ„Ø§Øª

### Firebase Analytics Ù„Ù„Ø¨Ù„ØºØ§Ø±ÙŠØ§
```typescript
import { analytics } from './firebase-config';

// ØªØªØ¨Ø¹ Ø¹Ø±Ø¶ Ø³ÙŠØ§Ø±Ø©
analytics.logEvent('car_view', {
  car_id: 'CAR-BG-123456-ABCDEF',
  user_type: 'buyer',
  language: 'bg',
  currency: 'EUR'
});

// ØªØªØ¨Ø¹ Ø¥Ø±Ø³ Ø±Ø³Ø©
analytics.logEvent('message_sent', {
  message_type: 'question',
  language: 'bg',
  car_category: 'ÑĞµĞ´Ğ°Ğ½'
});

// ØªØªØ¨Ø¹ ØªØ³Ø¬ÙŠÙ„ Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ù„ØºØ§Ø±ÙŠ
analytics.logEvent('bulgarian_user_signup', {
  signup_method: 'google',
  preferred_language: 'bg',
  location: 'Ğ¡Ğ¾Ñ„Ğ¸Ñ'
});
```

## ğŸ”„ Ù†Ø´Ø± ØµÙŠØ§Ù†Ø©

### Ø¥Ø¹Ø¯Ø§Ø¯ Ù†Ø´Ø±
```bash
# Ø¨Ù†Ø§Ø¡ Ù…Ø´Ø±Ø¹
npm run build

# Ù†Ø´Ø±  Firebase Hosting
firebase deploy --only hosting

# Ù†Ø´Ø± Functions
firebase deploy --only functions

# Ù†Ø´Ø± ÙƒÙ„ Ø´ÙŠØ¡
firebase deploy
```

### Ù…Ø±Ø§Ù‚Ø¨Ø© Ø£Ø¯Ø§Ø¡
- Firebase Performance Monitoring
- ØªØªØ¨Ø¹ Ø§Ø³ØªÙ‡Ù„Ø§Ùƒ Firestore reads/writes
- Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ø³ØªØ®Ø¯Ø§Ù… Storage
- ØªØ­Ù„ÙŠÙ„Ø§Øª Ø§Ø³ØªØ¹Ù„Ø§Ù…Ø§Øª Ø¨Ø·ÙŠØ¦Ø©

## ğŸ“ Ø¯Ø¹Ù… Ù…Ø³Ø§Ø¹Ø¯Ø©

### Ø§Ø³ØªÙƒØ´Ø§Ù Ø£Ø®Ø·Ø§Ø¡
```bash
# ÙØ­Øµ Ø­Ø© Ø®Ø¯Ù…Ø§Øª
node -e "const { checkBulgarianFirebaseStatus } = require('./index.ts'); checkBulgarianFirebaseStatus().then(console.log);"

# ØªØ´ØºÙŠÙ„ Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ù…ÙØµÙ„Ø©
node services-test.ts

# ÙØ­Øµ Firebase emulators
firebase emulators:start --inspect-functions
```

### Ù…Ø§Ø±Ø¯ Ù…Ø¯Ø©
- ğŸ“š [Firebase Documentation](https://firebase.google.com/docs)
- ğŸ‡§ğŸ‡¬ [Bulgarian Localization Guide](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/Locale)
- ğŸ’° [EUR Currency Formatting](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/NumberFormat)
- ğŸ• [Europe/Sofia Timezone](https://en.wikipedia.org/wiki/Europe/Sofia)

---

## ğŸ¯ Ø®Ù„Ø§ØµØ©

ØªÙ… ØªØ·ÙŠØ±  Ù†Ø¸Ø§Ù… Ø¨Ø§Ø³Ø·Ø© **GitHub Copilot** Ø®ØµÙŠØµØ§Ù‹ Ù„ØµØ© **Globul Cars** Ø¨Ù„ØºØ§Ø±ÙŠØ©ØŒ  ØªØ±ÙƒÙŠØ² :

- âœ… **Ø¯Ø¹Ù… ÙƒØ§Ù…Ù„ Ù„Ù„ØºØ© Ø¨Ù„ØºØ§Ø±ÙŠØ©** Ø±Ø³Ø§Ø¦Ù„ localized
- âœ… **ØªÙ†Ø³ÙŠÙ‚ Ø±Ø¨ÙŠ** Ù„Ù„Ø¹Ù…Ù„Ø© ØªØ§Ø±ÙŠØ®
- âœ… **Ø£Ù…Ø§Ù† Ù…ØªÙ‚Ø¯Ù…** Ø­Ù…Ø§ÙŠØ© Ø¨ÙŠØ§Ù†Ø§Øª
- âœ… **Ø£Ø¯Ø§Ø¡ Ù…Ø­Ø³Ù†**  Firebase emulators
- âœ… **Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø´Ø§Ù…Ù„Ø©** Ù„Ø¬Ù…ÙŠØ¹ Ø®Ø¯Ù…Ø§Øª
- âœ… **ØªØ«ÙŠÙ‚ Ù…ÙØµÙ„** Ø¨Ù„ØºØªÙŠÙ† Ø¹Ø±Ø¨ÙŠØ© Ø¨Ù„ØºØ§Ø±ÙŠØ©

ğŸš—ğŸ‡§ğŸ‡¬ **Globul Cars - ØµØ© Ø³ÙŠØ§Ø±Ø§Øª Ø¨Ù„ØºØ§Ø±ÙŠØ© Ù„Ù‰  ØªÙ‚Ù†ÙŠØ© Firebase Ù…ØªÙ‚Ø¯Ù…Ø©!**
  'car123',
  'ĞÑ‚Ğ»Ğ¸Ñ‡Ğ½Ğ° ĞºĞ¾Ğ»Ğ°! ĞšĞ¾Ğ»ĞºĞ¾ Ğµ Ğ¿Ñ€Ğ¾Ğ±ĞµĞ³ÑŠÑ‚?',
  'question'
);

// Ø§Ø³ØªÙ…Ø§Ø¹ Ù„Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª
const unsubscribe = bulgarianMessaging.listenToCarMessages('car123', (messages) => {
  console.log('New messages:', messages);
});
```

### 3. Ø¥Ù†Ø´Ø§Ø¡ ØºØ±ÙØ© Ø¯Ø±Ø¯Ø´Ø©
```typescript
// Ø¥Ù†Ø´Ø§Ø¡  Ø­ØµÙ„  ØºØ±ÙØ© Ø¯Ø±Ø¯Ø´Ø©
const chatRoomId = await bulgarianMessaging.createOrGetChatRoom('car123', 'seller456');

// Ø¥Ø±Ø³ Ø±Ø³Ø©  Ø¯Ø±Ø¯Ø´Ø©
await bulgarianMessaging.sendChatMessage(chatRoomId, 'Ğ—Ğ´Ñ€Ğ°Ğ²ĞµĞ¹Ñ‚Ğµ, Ğ¸Ğ½Ñ‚ĞµÑ€ĞµÑÑƒĞ²Ğ°Ğ¼ ÑĞµ Ğ¾Ñ‚ ĞºĞ¾Ğ»Ğ°Ñ‚Ğ°');
```

## ğŸŒ Ù…ÙŠØ²Ø§Øª Ø¨Ù„ØºØ§Ø±ÙŠØ©

### ğŸ’° Ø¯Ø¹Ù… Ø¹Ù…Ù„Ø© ØªÙ†Ø³ÙŠÙ‚
```typescript
import { BulgarianFirebaseUtils } from './integrations/firebase-codelab/firebase-config';

// ØªÙ†Ø³ÙŠÙ‚ Ø¹Ù…Ù„Ø©
const price = BulgarianFirebaseUtils.formatCurrency(25000); // "25,000.00 EUR"

// ØªÙ†Ø³ÙŠÙ‚ ØªØ§Ø±ÙŠØ®
const date = BulgarianFirebaseUtils.formatTimestamp(firebaseTimestamp); // "15 Ğ´ĞµĞºĞµĞ¼Ğ²Ñ€Ğ¸ 2024, 14:30"
```

### ğŸ“± ØªØ­Ù‚Ù‚  ØµØ­Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù„ØºØ§Ø±ÙŠØ©
```typescript
// ØªØ­Ù‚Ù‚  Ø±Ù‚Ù… Ù‡Ø§ØªÙ Ø¨Ù„ØºØ§Ø±ÙŠ
const isValid = BulgarianFirebaseUtils.isValidBulgarianPhone('+359888123456'); // true

// Ø¥Ù†Ø´Ø§Ø¡ Ø±Ù ÙØ±ÙŠØ¯ Ø¨Ù„ØºØ§Ø±ÙŠ
const id = BulgarianFirebaseUtils.generateBulgarianId('CAR'); // "BG-CAR-1A2B3C-XYZ789"
```

## ğŸ”§ Ø¥Ø¹Ø¯Ø§Ø¯ Ø¨ÙŠØ¦Ø©

### Ù…ØªØºÙŠØ±Ø§Øª Ø¨ÙŠØ¦Ø© Ù…Ø·Ù„Ø¨Ø©
```env
# Firebase Configuration
VITE_FIREBASE_API_KEY=your-api-key
VITE_FIREBASE_AUTH_DOMAIN=globul-cars.firebaseapp.com
VITE_FIREBASE_PROJECT_ID=globul-cars
VITE_FIREBASE_STORAGE_BUCKET=globul-cars.appspot.com
VITE_FIREBASE_MESSAGING_SENDER_ID=123456789
VITE_FIREBASE_APP_ID=1:123456789:web:abcdef123456
VITE_FIREBASE_MEASUREMENT_ID=G-ABCDEFGHIJ

# Development
VITE_USE_EMULATORS=true
```

### ØªØ´ØºÙŠÙ„ Ù…Ø­Ø§ÙƒÙŠØ§Øª
```bash
# ØªØ´ØºÙŠÙ„ Firebase emulators
firebase emulators:start

#  ØªØ´ØºÙŠÙ„ emulators Ù…Ø­Ø¯Ø¯Ø©
firebase emulators:start --only auth,firestore
```

## ğŸ“Š Ù‡ÙŠÙƒÙ„ Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª

### Ù…Ø¬Ù…Ø¹Ø§Øª Firestore
```
users/                          # Ù…Ù„ÙØ§Øª Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
  â”œâ”€â”€ {userId}/
  â”‚   â”œâ”€â”€ displayName: string
  â”‚   â”œâ”€â”€ email: string
  â”‚   â”œâ”€â”€ phoneNumber: string
  â”‚   â”œâ”€â”€ preferredLanguage: 'bg' | 'en'
  â”‚   â”œâ”€â”€ currency: 'EUR'
  â”‚   â””â”€â”€ role: 'buyer' | 'seller' | 'admin'

cars/                           # Ø³ÙŠØ§Ø±Ø§Øª
  â”œâ”€â”€ {carId}/
  â”‚   â”œâ”€â”€ title: string
  â”‚   â”œâ”€â”€ price: number
  â”‚   â”œâ”€â”€ currency: 'EUR'
  â”‚   â”œâ”€â”€ location: string
  â”‚   â””â”€â”€ lastActivity: timestamp

carMessages/                    # ØªØ¹Ù„ÙŠÙ‚Ø§Øª Ø³ÙŠØ§Ø±Ø§Øª
  â”œâ”€â”€ {messageId}/
  â”‚   â”œâ”€â”€ carId: string
  â”‚   â”œâ”€â”€ userId: string
  â”‚   â”œâ”€â”€ text: string
  â”‚   â”œâ”€â”€ type: 'comment' | 'question' | 'offer'
  â”‚   â””â”€â”€ timestamp: timestamp

chatRooms/                      # ØºØ±Ù Ø¯Ø±Ø¯Ø´Ø©
  â”œâ”€â”€ {chatRoomId}/
  â”‚   â”œâ”€â”€ participants: string[]
  â”‚   â”œâ”€â”€ carId: string
  â”‚   â””â”€â”€ lastMessage: object

chatMessages/                   # Ø±Ø³Ø§Ø¦Ù„ Ø¯Ø±Ø¯Ø´Ø©
  â”œâ”€â”€ {messageId}/
  â”‚   â”œâ”€â”€ chatRoomId: string
  â”‚   â”œâ”€â”€ userId: string
  â”‚   â”œâ”€â”€ text: string
  â”‚   â””â”€â”€ timestamp: timestamp
```

## ğŸ›¡ï¸ Ø£Ù…Ø§Ù† Ø§Ù…ØªØ«

### ğŸ”’ Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø£Ù…Ø§Ù†
- ØªØ´Ø± Ø¨ÙŠØ§Ù†Ø§Øª Ø­Ø³Ø§Ø³Ø©
- ØªØ­Ù‚Ù‚  ØµØ­Ø© Ù…Ø¯Ø®Ù„Ø§Øª
- Ø­Ù…Ø§ÙŠØ©  XSS attacks
- rate limiting Ù„Ù„Ù€ API calls

### ğŸ“‹ Ø§Ù…ØªØ« Ø¨Ù„ØºØ§Ø±ÙŠ
- Ø¯Ø¹Ù… GDPR Ù„Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø´Ø®ØµÙŠØ©
- ØªÙ†Ø³ÙŠÙ‚ Ø¹Ù…Ù„Ø© Ø±Ø¨ÙŠØ©
- Ø±Ø³Ø§Ø¦Ù„ Ø¨Ù„ØºØ© Ø¨Ù„ØºØ§Ø±ÙŠØ©
- Ø¯Ø¹Ù… Ø·Ù‚Ø© Ø²ÙŠØ© Ø¨Ù„ØºØ§Ø±ÙŠØ©

## ğŸ§ª Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª

### ØªØ´ØºÙŠÙ„ Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª
```bash
# Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø­Ø¯Ø©
npm run test:unit

# Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª ØªÙƒØ§Ù…Ù„
npm run test:integration

# Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Firebase
npm run test:ai
```

### Ù…Ù„ÙØ§Øª Ø§Ø®ØªØ¨Ø§Ø±
- `tests/firebase-codelab/auth-service.test.ts`
- `tests/firebase-codelab/messaging-service.test.ts`
- `tests/firebase-codelab/firebase-config.test.ts`

## ğŸ“ˆ Ù…Ø±Ø§Ù‚Ø¨Ø© ØªØ­Ù„ÙŠÙ„Ø§Øª

### Firebase Analytics
```typescript
// ØªØªØ¨Ø¹ Ø£Ø­Ø¯Ø§Ø« Ù…Ø®ØµØµØ©
import { analytics } from './integrations/firebase-codelab/firebase-config';

// ØªØªØ¨Ø¹ Ø¹Ø±Ø¶ Ø³ÙŠØ§Ø±Ø©
analytics.logEvent('car_view', {
  car_id: 'car123',
  user_type: 'buyer'
});

// ØªØªØ¨Ø¹ Ø¥Ø±Ø³ Ø±Ø³Ø©
analytics.logEvent('message_sent', {
  message_type: 'question',
  language: 'bg'
});
```

## ğŸ”„ ØªØ­Ø¯ÙŠØ«Ø§Øª ØµÙŠØ§Ù†Ø©

### Ø¥Ø¯Ø§Ø±Ø© Ø¥ØµØ¯Ø§Ø±Ø§Øª
- Ø§Ø³ØªØ®Ø¯Ø§Ù… semantic versioning
- ØªØ«ÙŠÙ‚ Ø¬Ù…ÙŠØ¹ ØªØºÙŠÙŠØ±Ø§Øª
- Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø´Ø§Ù…Ù„Ø© Ù‚Ø¨Ù„ Ø¥ØµØ¯Ø§Ø±

### Ù…Ø±Ø§Ù‚Ø¨Ø© Ø£Ø¯Ø§Ø¡
- Firebase Performance Monitoring
- ØªØªØ¨Ø¹ Ø§Ø³ØªÙ‡Ù„Ø§Ùƒ Ù…Ø§Ø±Ø¯
- ØªØ­Ø³ÙŠÙ† Ø§Ø³ØªØ¹Ù„Ø§Ù…Ø§Øª

## ğŸ“ Ø¯Ø¹Ù… Ù…Ø³Ø§Ø¹Ø¯Ø©

Ù„Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©  Ø¥Ø¨Ù„Ø§Øº Ø¹Ù† Ù…Ø´Ø§ÙƒÙ„:
1. ØªØ­Ù‚Ù‚  console logs
2. Ø±Ø§Ø¬Ø¹ Firebase console Ù„Ù„Ø£Ø®Ø·Ø§Ø¡
3. ØªØ­Ù‚Ù‚  Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¨ÙŠØ¦Ø©
4. Ø±Ø§Ø¬Ø¹ ØªØ«ÙŠÙ‚ Ø±Ø³Ù…ÙŠ Ù„Ù€ Firebase

---

**ØªÙ… ØªØ·ÙŠØ± Ø¨Ø§Ø³Ø·Ø© GitHub Copilot Ù„ØµØ© Globul Auto Platform** ğŸ‡§ğŸ‡¬ğŸš—
